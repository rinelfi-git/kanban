<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive kanban</title>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js'></script>
    <script src="kanban.js"></script>
    <link rel="stylesheet" href="kanban.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            height: 100vh;
        }

        .menamena {
            background-color: red !important;
        }
    </style>
    <script>
        $(function () {
            var data = [
                {
                    title: 'Une action à faire',
                    header: 'todiscuss'
                },
                {
                    title: 'Première',
                    position: 8,
                    header: 'todiscuss',
                    contributors: [
                        { id: 1, name: 'Rijaniaina', image: 'https://2.gravatar.com/avatar/68745922c85aa7573484210c43638065', data: {id: 123} },
                        { id: 2, name: 'Rijaniaina Elie Fidèle Rijaniaina Elie Fidèle Rijaniaina Elie Fidèle ', image: 'https://2.gravatar.com/avatar/68745922c85aa7573484210c43638065' },
                    ],
                    actions: [
                        {icon: 'fa fa-commenting', badge: '0', action: 'onCardCommentClick', bstooltip: {text: 'Rija'}},
                        {icon: 'fa fa-trash-o', action: 'onDelete'},
                        {icon: 'fa fa-picture-o', badge: '0', action: 'onCardPictureClick', hideCondition: {badge: '0'}},
                        {badge: '0/0', className: 'menamena'},
                    ]
                }
            ];
            var headers = [
                { id: 'todiscuss', label: 'A discuter' },
                { id: 'todo', label: 'A faire' },
                { id: 'totest', label: 'Phase de teste' },
                { id: 'done', label: 'Terminé' },
                { id: 'validated', label: 'Validé' },
            ]
            var kanbanDom = $('#kanban').kanban({
                headers,
                data,
                prependOnly: false,
                editable: true,
                language: 'fr',
                showCardNumber: true,
                actionConditionEnabled: true,
                onCardClick(clickedData) {
                    console.log('Rinelfi clicked', clickedData);
                },
                onEditCardOpen(editData) {
                    console.log('Rinelfi edit prompt at', editData);
                },
                onCreateCardOpen(column) {
                    console.log('Rinelfi create prompt at', column);
                },
                onCardUpdate(updated) {
                    console.log('Rinelfi update at', updated);
                },
                onCardInsert(inserted) {
                    inserted.id = 'Olona';
                    inserted.actions = [
                        {icon: 'fa fa-commenting', badge: '0', action: 'onCardCommentClick'},
                        {icon: 'fa fa-picture-o', badge: '0', action: 'onCardPictureClick'},
                        {icon: 'fa fa-thumb-tack', badge: '0/0', action: 'onCardTaskClick', condition: {badge: '0/0'}},
                    ];
                    kanbanDom.kanban('setData', {column: inserted.header, index: inserted.position, data: inserted});
                    console.log('new insertion', inserted);
                },
                onCardDrop(dropped, updates) {
                    console.log('Rinelfi drop at', dropped, updates, $('#kanban').data('matrix'));
                },
                onHeaderChange(changed) {
                    console.log(changed);
                },
                onCardCommentClick(datum) {
                    console.log('comment', datum);
                },
                onDelete(action, dom) {
                    console.log(dom);
                    var index = kanbanDom.find(`[data-column=${action.header}] .kanban-list-card-detail`).index(dom)
                    kanbanDom.kanban('deleteData', {column: action.header, index: index});
                },
                onRenderDone() {
                    
                }
            });
            
        });
    </script>
</head>

<body>
    <div id="kanban"></div>
</body>

</html>